# 3. Файлы 
бинарный файл - последовательность байт, длинна которой равна размеру файла
текстовый файл - последовательность строк, каждая строка это последовательность символов в коне которой находится символ конца строки.

Модель последовательного файла - это последовательность байт и указатель текущего положения

библиотеки для работы с файлами 
непосредственная работа с файлами рекомендуется только для простых задач, при этом обычно используют текстовые файлы
1. текстовый формат файла проще в отладке
2. производительность процессора и объем памяти уже не является ограничениями 
обычно для бинарных файлов создается специальный формат данных и 
библиотеки для работы с ним, например:
	* модуль pickle позволяет превращать объекты в последовательность байт и делать обратное преобразование
	* модуль с cqlite3 позволяет организовать СУБД в одном файле
текстовый файл так же может быть использован как основа для специального формата данных например CSV, XML, JSON

## Текстовые и бинарные файлы

в Питоне версии 3 текстовые и бинарные файлы имеют принципиальное различие: 
1. чтение текстовых файлов создает строку (тип str)
2. чтение бинарного файла создает массив байт (тип bytes)

Так как файл это последовательность строк (коллекция) файл может быть использован в контексте итерации:
1. в инструкции for
2. с итераторами iter()/next()
3. в генераторах коллекции

## Работа с файлами 
Открытие существующего или создание нового файла
1. open() - можно открыть любой файл на компьютере
2. технически Питон создает на его основе объект

### Синтаксис:
```python
f = open(file_name, access_Made)
```

## Список режимов открытия файлов

* ```r``` 	- Только для чтения
* ```w```	- Только для записи 
* ```rb```	- Только для чтения (бинарный)
* ```wb```	- Только для записи (бинарный) Создает новый файл для записи, если на найдет с указанным именем
* ```r+```	- Для чтения и записи
* ```rb+```	- Для чтения и записи (бинарный)
* ```w+```	- Для чтения и записи. Создает новый файл для записи, если на найдет с указанным именем
* ```wb+```	- Для чтения и записи (бинарный) Создает новый файл для записи, если на найдет с указанным именем 
* ```a```	- Откроет для добавления нового содержимого. Создает новый файл для записи, если на найдет с указанным именем
* ```ab``` 	- Откроет для добавления нового содержимого (бинарный) Создает новый файл для записи, если на найдет с указанным именем 


## Менеджер контекста with

Инструкция with создает контекст для исполнения для блока  инструкций следующего непосредственно после нее 

Синтаксис:
```python
with выражение as переменная:
	блок_инструкций
```

Результатом вычисления выражения должен быть объект, поддерживающий протокол контекстного менеджера
если объект возвращает управляющий параметры, он будет присвоен переменной следующей после ключевого слова as 

Использование with с файлами 
объект file поддерживает протокол контекстного менеджера 
1. открытый файл возвращаемый функцией open передается контекстному менеджеру
2. код завершения закрывает файл

with open('sample.text') as f:
	for line in f:
		print(line, end=' ')
#Здесь файл f уже закрыт 
f/ read()#=> ValueError: I/O operation on closed file.

упаковка кода работы с файлом в менеджер контекста with стала фактическим стандартом

## Методы файла в Питоне

* ```close()``` закрывает открытый файл  
* ```fileno()``` возвращает целочисленный дескриптор файла
* ```flush()``` очищает внутренний буфер
* ```isatty()``` возвращает Тгuе, если файл привязан к терминалу  
* ```next()``` возвращает следующую строку файла
* ```read()``` чтение первых п символов файла 
* ```readline()``` читает одну строчку, строки или файл 
* ```readlines()``` читает и возвращает список всех строк в файле
* ```seek(offset[, whene])``` устанавливает текущую позицию в файле 
* ```seekalbe()``` проверяет, поддерживает ли файл случайный доступ. Возвращает Тruе, если да 
* ```tell()``` возвращает текущую позицию в файле 
* ```truncate(n)``` уменьшает размер файл. Если п указала, то файл обрезается до п байт, если нет - до текущей позиции 
* ```write(str)``` добавляет строку stг в файл 
* ```writelines(sequence)``` добавляет последовательность строк в файл


## Функции модуля оs для работы c файлами 
Модуль оs обеспечивает доступ к низкоуровневым функциям операционной системы, в том числе к функциям работы с файлами

Примеры 

```python
import os
оs.fstаt(fd) 		# Получить информацию о файле 
оs.ftruпсаtе(fd) 	# Укоротить файл до заданного размера 
оs.геаd(fшd) 		# Низкоуровневое чтение 
оs.wrіtе(fd) 		# Низкоуровневая запись 
оs.rепате(fіlеnате 1, fіlепате2) # Переименовать файл 
оs.сhтоd(fіlепате)	# Изменить права доступа к файлу 
оs.сhоwn(fіlеnате) 	#Изменить владельца файла и владеющую группу
os.unlink(filename) #yanumb φaйл
```


## Модуль os, работа с директориями
 
```python
раth = os.gеtсwd(0) # Получить текущую рабочую директорию 
оs.сhdіr(раth) # Изменить рабочую директорию 
оs.сhrооt(раth) # Изменить корневую директорию программы 
оs.mкdіг(раth) # Создать директорию 
os.rmdir(path) #удалить директорию
оs.lіstdіr(раth='.') # Получить список файлов в (текущей) директорией
оs.wаlк(tор_раth) # Получить список файлов в дереве директорий, используется совместно с инструкцией fоr
```

## Модуль sуs
 
Модуль sуs обеспечивает доступ к внутренним параметрам 
исполняемой программы и среды исполнения 
```python
sуs.аrgv # список параметров с которыми программа была вызвана 
sуs.тоdulеs # словарь содержащий загруженные модули 
sуs.vеrsіоn # версия интерпретатора Питона 
sуs.рlаtfоrm # имя платформы - linux, wіn32', 'dаrwіn', суgwіn' 
sуs.gеtwіndоwsvеrsіоn(0) # версия Wіndоws 
sуs.ехіt() # функция завершения программы
```
 
Встроенные функции hеlр() и dіr() 
 Функция hеlр(оЬj) вызванная для объекта находит его 
строку документации и выводит документацию на 
экран. 
 Текст форматируется для лучшего восприятия, есть 
возможность перелистывать страницы длинного текста 
(вызывается раgеr) 
Объектами документирования являются модули, 
функции (методы) и классы 
Функция dіr(оЬj) возвращает список атрибутов объект
